<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Generator Redaksi Taksiran</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <h1>Generator Redaksi Taksiran</h1>
  <p class="subtitle">
    Isikan data di bawah, lalu tekan <b>Tambah Redaksi</b>. Hasil bisa diunduh sebagai TXT atau Word, dan data
    akan tersimpan sebagai riwayat di browser ini.
  </p>

  <!-- ===================== FORM DATA UMUM ===================== -->
  <div class="form-section">
    <div class="section-title"><span></span>Data Umum</div>
    <div class="form-row">
      <label for="noUrut">No Urut:</label>
      <input type="text" id="noUrut" value="">
    </div>

    <div class="form-row">
      <label for="jumlahBarang">Jumlah:</label>
      <select id="jumlahBarang">
        <option value="satu">satu</option>
        <option value="sepasang">sepasang</option>
        <option value="dua">dua</option>
        <option value="tiga">tiga</option>
        <option value="empat">empat</option>
      </select>

      <label for="barang">Barang:</label>
      <select id="barang">
        <option>kalung</option>
        <option>liontin</option>
        <option>gelang</option>
        <option>cincin</option>
        <option>giwang</option>
        <option>anting</option>
        <option>bros</option>
        <option>batu</option>
        <option>emas batangan</option>
        <option>keping koin emas</option>
        <option>jam tangan</option>
        <option value="lainnya">Lainnya (isi sendiri)</option>
      </select>
    </div>

    <!-- Input barang custom untuk opsi "Lainnya" -->
    <div class="form-row" id="rowBarangCustom" style="display:none;">
      <label for="barangCustom">Jenis barang lainnya:</label>
      <input type="text" id="barangCustom" placeholder="contoh: set perhiasan, kalung liontin, dll">
    </div>

    <div class="form-row">
      <label for="karat">Kadar (karat):</label>
      <select id="karat">
        <option value="Diluar SNI">Diluar SNI</option>
        <option value="8">8 karat</option>
        <option value="9">9 karat</option>
        <option value="10">10 karat</option>
        <option value="11">11 karat</option>
        <option value="12">12 karat</option>
        <option value="13">13 karat</option>
        <option value="14">14 karat</option>
        <option value="15">15 karat</option>
        <option value="16">16 karat</option>
        <option value="17">17 karat</option>
        <option value="18">18 karat</option>
        <option value="19">19 karat</option>
        <option value="20">20 karat</option>
        <option value="21">21 karat</option>
        <option value="22">22 karat</option>
        <option value="23">23 karat</option>
        <option value="24">24 karat</option>
      </select>

      <label for="berat">
        Berat (g / carat*):
        <span class="info-icon" data-tip="Untuk batu lepasan gunakan satuan carat. Untuk perhiasan gunakan gram.">i</span>
      </label>
      <input type="number" step="0.01" id="berat" value="">
    </div>
    <p class="note">Catatan: Jika barang = <b>batu</b>, berat dianggap dalam satuan <b>carat</b>.</p>
  </div>

  <!-- ===================== FORM BERLIAN ===================== -->
  <div class="form-section">
    <div class="section-title"><span></span>Berlian</div>
    <div class="checkbox-row">
      <input type="checkbox" id="adaBerlian" checked>
      <label for="adaBerlian">Ada berlian?</label>
    </div>
    <div class="form-row">
      <label for="jmlBerlian">Jml Berlian:</label>
      <input type="number" id="jmlBerlian" value="" min="0">
      <label for="jenisBerlian">Jenis berlian:</label>
      <select id="jenisBerlian">
        <option value="asli">Berlian (asli)</option>
        <option value="bukan">Bukan berlian</option>
      </select>
    </div>
  </div>

  <!-- ===================== FORM BATU ===================== -->
  <div class="form-section">
    <div class="section-title"><span></span>Batu</div>
    <div class="checkbox-row">
      <input type="checkbox" id="adaBatu">
      <label for="adaBatu">Ada batu?</label>
    </div>

    <div class="form-row">
      <label for="batu1_jml">Jml Batu 1:</label>
      <input type="number" id="batu1_jml" value="" min="0">
      <label for="batu1_jenis">Jenis Batu 1:</label>
      <input type="text" id="batu1_jenis" placeholder="Ruby / Chalcedony / dll">
    </div>

    <div class="form-row">
      <label for="batu2_jml">Jml Batu 2:</label>
      <input type="number" id="batu2_jml" value="" min="0">
      <label for="batu2_jenis">Jenis Batu 2:</label>
      <input type="text" id="batu2_jenis">
    </div>

    <div class="form-row">
      <label for="batu3_jml">Jml Batu 3:</label>
      <input type="number" id="batu3_jml" value="" min="0">
      <label for="batu3_jenis">Jenis Batu 3:</label>
      <input type="text" id="batu3_jenis">
    </div>
    <p class="note">Untuk <b>batu lepasan</b>, gunakan jenis barang = <b>batu</b> dan isi jenis batu pada Batu 1.</p>
  </div>

  <!-- ===================== FORM KHUSUS EMAS BATANGAN ===================== -->
  <div class="form-section">
    <div class="section-title"><span></span>Khusus emas batangan</div>
    <div class="form-row">
      <label for="merkEmas">Merk Emas:</label>
      <input type="text" id="merkEmas" placeholder="Logam Mulia / UBS / dll">
    </div>
    <div class="form-row">
      <label for="noSeriEmas">No Seri:</label>
      <input type="text" id="noSeriEmas" placeholder="Nomor seri emas batangan">
    </div>
  </div>

  <!-- ===================== NILAI TAKSIRAN & IMPORT ===================== -->
  <div class="form-section">
    <div class="section-title"><span></span>Nilai Taksiran & Import CSV</div>
    <div class="form-row" style="flex-direction:column; align-items:flex-start;">
      <div style="width:100%; display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
        <label for="harga">
          Harga (Rp):
          <span class="info-icon" data-tip="Isi 0 jika tidak dilakukan penaksiran harga.">i</span>
        </label>
        <input type="number" id="harga" value="" min="0" style="max-width:250px;">
      </div>
      <div id="hargaError" class="error-text" style="display:none;"></div>
    </div>

    <div id="buttonRow">
      <button id="addBtn">ï¼‹ Tambah Redaksi</button>
      <button id="downloadBtn">â¬‡ Download TXT</button>
      <button id="downloadDocBtn">ðŸ“„ Download Word</button>

      <input type="file" id="csvInput" accept=".csv">
      <button id="importBtn">â‡ª Import CSV</button>
    </div>
    <p class="note">
      Struktur CSV yang diharapkan:<br>
      <code>NoUrut,Jumlah,Barang,Karat,Berat,AdaBerlian,JmlBerlian,JenisBerlian,AdaBatu,Batu1Jml,Batu1Jenis,Batu2Jml,Batu2Jenis,Batu3Jml,Batu3Jenis,MerkEmas,NoSeriEmas,Harga</code><br>
      Delimiter boleh koma <b>,</b> atau titik koma <b>;</b>.
    </p>
  </div>

  <!-- ===================== HASIL REDAKSI ===================== -->
  <h2>Hasil Redaksi</h2>
  <div id="outputWrapper">
    <table id="outputTable">
      <thead>
      <tr>
        <th class="col-no">No.</th>
        <th>Redaksi</th>
        <th class="col-aksi">Aksi</th>
      </tr>
      </thead>
      <tbody></tbody>
    </table>
    <p class="note">Gunakan tombol <b>Salin</b> untuk copy satu redaksi, dan <b>Hapus</b> untuk menghapus baris tertentu.</p>
  </div>

  <!-- ===================== DASHBOARD & RIWAYAT ===================== -->
  <div class="form-section">
    <div class="section-title"><span></span>Riwayat & Dashboard (Browser Ini)</div>

    <div id="dashboardBox" style="margin-bottom:10px; font-size:13px;">
      <p><b>Total redaksi tersimpan:</b> <span id="dashTotal">0</span></p>
      <p><b>Total nilai taksiran (Rp):</b> <span id="dashTotalHarga">0</span></p>
      <p><b>Jumlah emas batangan:</b> <span id="dashEmasBatangan">0</span></p>
      <p><b>Jumlah batu lepasan:</b> <span id="dashBatuLepas">0</span></p>
    </div>

    <div id="historyBox" style="max-height:200px; overflow:auto; border-top:1px solid #e5e7eb; padding-top:8px;">
      <table>
        <thead>
        <tr>
          <th style="width:40px;">No</th>
          <th>Barang</th>
          <th style="width:90px; text-align:right;">Harga</th>
        </tr>
        </thead>
        <tbody id="historyTableBody"></tbody>
      </table>
    </div>
    <p class="note">Riwayat disimpan di <b>localStorage</b> browser ini. Jika dibersihkan, data akan hilang.</p>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
